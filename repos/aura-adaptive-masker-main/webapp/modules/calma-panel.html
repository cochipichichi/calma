<!doctype html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Calma diaria ‚Äî CALMA</title>
<style>body{margin:0;background:linear-gradient(180deg,#0d1629,#0b1222);color:#eef3ff;font-family:system-ui}.container{max-width:1000px;margin:0 auto;padding:1.4rem}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}.card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:1rem}.row{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;justify-content:space-between}.btn{padding:.55rem .9rem;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.08);color:#eef3ff}</style>
  <link rel="stylesheet" href="assets/css/accessibility.css">
  <link rel="stylesheet" href="assets/css/dock.css">
</head><body>
<div class="container">
  <h1>Tu calma diaria ü™∂</h1>
  <div class="grid">
    <div class="card">
      <h3>Checklist</h3>
      <div id="list"></div>
      <div class="row" style="margin-top:.75rem">
        <button class="btn" id="reset">üîÑ Reiniciar d√≠a</button>
      </div>
    </div>
    <div class="card">
      <h3>Notas</h3>
      <textarea id="notes" rows="10" style="width:100%;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:#eef3ff;padding:.75rem"></textarea>
      <p><small>Consejo: escribe 1 cosa por la que agradeces hoy.</small></p>
    </div>
  </div>
</div>
<script>
(()=>{
  const key='calma_panel_v1'; const today=new Date().toISOString().slice(0,10);
  let state = { day: today, tasks: [{label:'Respiraci√≥n (5 min)',done:false},{label:'Paisaje sonoro (10 min)',done:false},{label:'Agradecimiento del d√≠a',done:false},{label:'Caminar 10 minutos',done:false}], notes:'' };
  try{ const raw=localStorage.getItem(key); if(raw) state=Object.assign(state, JSON.parse(raw), {day:today}); }catch(e){}
  const list=document.getElementById('list'); const notes=document.getElementById('notes');
  function render(){ list.innerHTML=''; state.tasks.forEach((t,i)=>{ const l=document.createElement('label'); l.style.display='flex'; l.style.alignItems='center'; l.style.gap='.5rem'; l.innerHTML='<input type=checkbox '+(t.done?'checked':'')+'> <span>'+t.label+'</span>'; l.querySelector('input').onchange=(e)=>{ t.done=e.target.checked; save(); }; list.appendChild(l); }); notes.value=state.notes||''; }
  function save(){ localStorage.setItem(key, JSON.stringify(state)); }
  document.getElementById('reset').onclick=()=>{ state = { day: today, tasks: state.tasks.map(t=>({label:t.label,done:false})), notes:'' }; save(); render(); };
  notes.oninput=(e)=>{ state.notes=e.target.value; save(); };
  render();
})();
</script>

<footer class="calma-footer" style="margin-top:2rem;padding:1rem;text-align:center;opacity:.9">bienestar auditivo ‚Äî Hecho con amor por Pancho para mi Bel√©n üíú</footer>

  <script src="assets/js/accessibility.js"></script>
  <script src="assets/js/dock.js"></script>

<script>
(()=>{
  // Diario Sonoro: selector de √°nimo -> paisaje sonoro breve
  const mood = document.createElement('div');
  mood.innerHTML = '<h3>Mi Diario Sonoro</h3><div style="display:flex;gap:.5rem;flex-wrap:wrap"><select id="moodSel"><option value="">C√≥mo te sientes...</option><option value="calma">Calma</option><option value="ansiedad">Ansiedad</option><option value="alegre">Alegre</option><option value="triste">Triste</option></select><button id="moodPlay">‚ñ∂Ô∏è Sonar</button></div>';
  document.querySelector('.grid').appendChild(Object.assign(document.createElement('div'),{className:'card',innerHTML:mood.innerHTML}));
  (function(){
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const master = ctx.createGain(); master.connect(ctx.destination); master.gain.value=.5;
    function white(){ const b=ctx.createBuffer(1, ctx.sampleRate*2, ctx.sampleRate); const d=b.getChannelData(0); for(let i=0;i<d.length;i++) d[i]=Math.random()*2-1; const s=ctx.createBufferSource(); s.buffer=b; s.loop=true; return s; }
    function scene(type){
      const src = white();
      let f = ctx.createBiquadFilter(); f.type='lowpass'; f.frequency.value = (type==='alegre'? 1500 : type==='calma'? 900 : type==='triste'? 700 : 500);
      src.connect(f); const g=ctx.createGain(); g.gain.value= (type==='ansiedad'? .25 : .15); f.connect(g); g.connect(master);
      return {src, g};
    }
    document.getElementById('moodPlay').onclick = ()=>{
      const v = document.getElementById('moodSel').value; if(!v) return;
      ctx.resume(); const sc = scene(v); try{ sc.src.start(); }catch(e){} setTimeout(()=>{ try{ sc.src.stop(); }catch(e){} }, 8000);
    };
  })();

  // Cartas a mi calma (mensajes aleatorios)
  const cartas = (JSON.parse(localStorage.getItem('calma_cartas')||'null')) || [
    "Hoy no necesitas ser perfecta, solo respirar.",
    "Estoy orgulloso de ti, mi amor.",
    "Tu calma vale m√°s que cualquier ruido.",
    "Un paso a la vez, con amor."
  ];
  function renderCarta(){
    let idx = Math.floor(Math.random()*cartas.length);
    const el = document.getElementById('carta');
    if(el) el.textContent = cartas[idx];
  }
  const box = document.createElement('div');
  box.className='card';
  box.innerHTML = '<h3>Cartas a mi calma</h3><p id="carta" style="opacity:.9"></p><div><input id="cartaIn" placeholder="Escribe una carta..."><button id="addCarta">Agregar</button> <button id="nextCarta">Otra</button></div>';
  document.querySelector('.grid').appendChild(box);
  document.getElementById('addCarta').onclick = ()=>{
    const t = document.getElementById('cartaIn').value.trim(); if(!t) return;
    cartas.push(t); localStorage.setItem('calma_cartas', JSON.stringify(cartas)); document.getElementById('cartaIn').value=''; renderCarta();
  };
  document.getElementById('nextCarta').onclick = renderCarta;
  renderCarta();
})();
</script>

</body></html>